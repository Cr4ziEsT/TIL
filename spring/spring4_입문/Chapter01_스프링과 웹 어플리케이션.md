# CHAPTER 01 스프링과 웹 어플리케이션

### 웹 어플리케이션과 설계 이론

- 웹 어플리케이션이란?

  - 웹 시스템의 기본적인 구조

    1. 정적 콘텐츠 : 클라이언트 머신의 웹 브라우저가 네트워크에 있는 웹 서버로부터 요청한 HTML을 읽어와 표시
    2. 동적 콘텐츠 : 웹 서버에서 애플리케이션 서버(웹 서버의 요구에 따라서 콘텐츠를 동적으로 생성하는 서버)에 처리를 요청하고 대부분은 RDB에서 데이터를 읽어오거나 가공하고 그 처리 결과를 웹 서버에서 받아 웹 브라우저에 표시

    ![WWW의 구조]()

    3. 현재는 Ajax로 웹 브라우저에 풍부한 화면을 구현할 수 있으며 RDB 대신 KVS(Key Value Store, Key에 의한 Value[데이터]를 저장/관리하는 방식])을 사용하고 클라이언트가 스마트폰인 경우도 많으며 인터넷상의 서비스(ex. 메일 or SNS)로 존재할 때도 있지만 기본적인 동작은 위와 동일

  - 웹 어플리케이션

    1. 여러 사용자가 인터넷을 통해 데이터베이스에 접근하고 안전하게 정보를 읽고 쓸 수 있게 마만들어진 , 웹 브라우저와 RDB를 이용한 애플리케이션(티켓 및 상품 예약 시스템, 수주/발주 시스템 등)

    ![웹 애플리케이션]()

    2. 다음과 같은 동작을 반족
       1. 웹 브라우저에서 버튼을 클릭
       2. 버튼에 대응한 비즈니스 로직이 RDB의 데이터를 이용해서 처리 진행
       3. 처리 결과를 전송
       4. 웹 브라우저에 표시

       ![웹 애플리케이션의 동작]()

    3. 주의해야 할 점 : 처리 결과를 전송한 후 접속(세션)이 끊어져버리는 것으로 **상태를 저장할 수 없다**는 것!




> 웹 어플리케이션은 어떤 특징이 있는가?
>
> Spring은 기존의 기술에 어떤 문제점을 해결한 것인가?



- JSP, Servlet의 등장

  - 웹 기술은 처음에 정적 콘텐츠(HTML 파일)를 표시하는 기술

  - 동적 콘텐츠 반환의 CGI(Common Gateway Interface) 등장

    - CGI의 문제점

      1. 처리를 요청할 때마다 프로그램이 실행되는 점
      2. 세션 관리가 없다는 점

      => 처리 요청이 많아지면 성능 저하나 트랜잭션 관리의 어려움 초래

      3. 페이지 생성 로직과 비지니스 로직을 분리하기 곤란

  - JSP와 Servlet이 등장

    - CGI의 단점을 해결

      1. 멀티 스레드로 실행
      2. 세션 관리를 해줌
      3.  JSP로 페이지를 생성하고 비지니스 로직을 Servlet으로 처리

      ![JSP&Servlet과 웹 컨테이너]()

- EJB의 등장과 쇠퇴

  - EJB의 탄생

    - EJB 컨테이너에 의해 분산된 EJB컴포넌트를 마치 같은 머신에 잇는 것 처럼 접근할 수 있게 함
    - 분산된 데이터베이스의 트랜잭션을 마치 하나의 데이터베이스에 있는 것처럼 제어할 수 있는 분산 처리와 분산 트랜잭션의 융합 컴포넌트

  - EJB 발전의 근원

    - CORBA가 벤더 각자의 설계로 상호 운용성을 잃었기 때문에 상호 운용성을 확보하기 위해 만든 기술

    **이처럼  분산 환경을 위한 컴포넌트로 등장, JSP/Servlet와 같은 웹 애플리케이션을 위한 기술은 아니였음!**

  ![EJB의 등장]()

  - EJB의 오해

    - 재사용할 수 있는 컴포넌트
    - SQL 기술이 필요 없는 DB 액세스 프레임워크

    *이러한 오해로 인해 JSP&Servlet으로 프레젠테이션을 구현하고 비지니스 로직은 EJB로 구현하는 것이 웹 애플리케이션에서의 권장 설계가 됨*

  - EJB의 쇠퇴

    - 웹 애플리케이션은 분산 처리를 거의 사용하지 않음(EJB는 분산용 컴포넌트)
    - EJB 컨테이너에 의존하는 EJB는 테스트하기 어려움
    - EJB의 사양도 복잡함

- 스프링의 등장

  - 중량급 J2EE 컨테이너를 대신할 경량 컨테이너로서 DI와 AOP의 기능을 가진 DIxAOP 컨테이너인 스프링을 로드 존슨이 고안
  - POJO(Plain Old Java Object)라고 부르는 컨테이너와 프레임워크 등에 의존하지 않는 일반 오브젝트의 생명 주기 관리나 오브젝트 간의 의존 관계를 해결하는 아키텍쳐를 구현한 컨테이너
  - EJB의 장점인 선언적 트랜잭션 관리를 POJO로 구현
  - 다양한 O/R 매핑 프레임워크(ORM)ㅡㄹ 이용

  >  EJB 컨테이너 대신 DIxAOP 컨테이너를 이용하는 가장 큰 이유는 DIxAOP 컨테이너에 실을 수 있는 오브젝트가 POJO라고 부르는 일반 자바 오브젝트이기 때문
  >
  >  POJO는 DI 컨테이너에 의존하지 않아 단위 테스트를 쉽게 수행하지만 EJB 컴포넌트는 단위 테스트를 수행하기 어려움

![JAVA Enterprise의 역사]()



### 애플리케이션 아키텍처

- 애플리케이션 아키텍처의 필요성

  - 일반적으로 애플리케이션 전체의 구조, 공통된 방식(메커니즘)
  - 시스템의 애플리케이션이 공통으로 이용할 수 있는 사용자 인터페이스 구조나 데이터베이스 접근 방식 등 시스템의 기반이 되는 부분
  - 아키텍처는 다양하게 정의할 수 있음

- 웹 애플리케이션 개발의 목표

  1. 유스 케이스(Use Case) 등으로 표현되는 기능 요구나 응답 시간 등을 규정한 비기능적 요구를 포함한 사용자의 요구를 만족한다는 목표

  2. 비동기 요건이나 제약에 포함되는 개발 기간 엄수나 변경, 기능 추가의 용이성, 테스트의 용이성 등 개발자나 운영자를 위한 목표(이 책의 아키텍처)

  - 다음과 같은 구조로 이루어진 애플리케이션 아키텍쳐의 실현을 목표로 함
    - 개발 효율
      1. 의도를 파악하기 쉽고 이해하기 쉬운 구조
      2. 테스트하기 쉬운 구조
    - 유연성
      1. 변경하기 쉽고 기능을 추가하기 쉬운 구조
      2. 미래의 환경 변화에 대응할 수 있는 견고한 구조

- 웹 애플리케이션의 생명 주기와 애플리케이션 아키텍처의 필요성

  - 유연성이 필요한 이유

    - 사용자의 요구가 변하기 쉽기 때문!
    - 웹 애플리케이션의 생명 주기는 웹 애플리케이션이 폐기될 때까지

    ![웹 애플리케이션의 생명 주기]()
